{% extends "admin/base_site.html" %}
{% load static %}

{% block title %}Dashboard - Fitblog Admin{% endblock %}

{% block extrahead %}
<style>
    .dashboard-header {
        background: linear-gradient(135deg, #A5D6A7 0%, #7BC67B 100%);
        color: white;
        padding: 30px;
        border-radius: 12px;
        margin-bottom: 30px;
        box-shadow: 0 4px 15px rgba(165, 214, 167, 0.3);
    }

    .dashboard-header h1 {
        margin: 0;
        font-size: 28px;
        font-weight: 700;
    }

    .dashboard-header p {
        margin: 5px 0 0 0;
        opacity: 0.95;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: white;
        border: 1px solid #e0e0e0;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
    }

    .stat-card:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transform: translateY(-2px);
    }

    .stat-card .label {
        font-size: 12px;
        color: #999;
        text-transform: uppercase;
        font-weight: 600;
        margin-bottom: 8px;
        letter-spacing: 0.5px;
    }

    .stat-card .value {
        font-size: 32px;
        font-weight: 700;
        color: #333;
    }

    .stat-card .subtext {
        font-size: 12px;
        color: #999;
        margin-top: 8px;
    }

    .stat-card.primary .value {
        color: #2E7D32;
    }

    .stat-card.success .value {
        color: #51CF66;
    }

    .stat-card.warning .value {
        color: #FFA500;
    }

    .stat-card.danger .value {
        color: #FF6B6B;
    }

    .section {
        background: white;
        border: 1px solid #e0e0e0;
        border-radius: 12px;
        padding: 25px;
        margin-bottom: 20px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .section h2 {
        margin-top: 0;
        margin-bottom: 20px;
        font-size: 18px;
        font-weight: 700;
        color: #333;
        border-bottom: 2px solid #A5D6A7;
        padding-bottom: 10px;
    }

    .goal-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .goal-list li {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px;
        border-bottom: 1px solid #f0f0f0;
    }

    .goal-list li:last-child {
        border-bottom: none;
    }

    .goal-name {
        font-weight: 500;
        color: #333;
    }

    .goal-count {
        background: #A5D6A7;
        color: white;
        padding: 4px 12px;
        border-radius: 20px;
        font-weight: 600;
        font-size: 12px;
    }

    .progress-bar {
        background: #f0f0f0;
        border-radius: 10px;
        height: 8px;
        overflow: hidden;
        margin-top: 8px;
    }

    .progress-bar-fill {
        background: linear-gradient(90deg, #A5D6A7 0%, #7BC67B 100%);
        height: 100%;
        transition: width 0.3s ease;
    }

    .user-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
    }

    .user-stat-item {
        text-align: center;
        padding: 15px;
        background: #f9f9f9;
        border-radius: 8px;
    }

    .user-stat-item .label {
        font-size: 11px;
        color: #999;
        text-transform: uppercase;
        margin-bottom: 8px;
    }

    .user-stat-item .value {
        font-size: 24px;
        font-weight: 700;
        color: #333;
    }
</style>
{% endblock %}

{% block content %}
<div class="dashboard-header">
    <h1>üèãÔ∏è Dashboard Fitblog</h1>
    <p>Qu·∫£n tr·ªã h·ªá th·ªëng ng∆∞·ªùi d√πng v√† th·ªëng k√™</p>
</div>

<!-- Main Stats -->
<div class="stats-grid">
    <div class="stat-card primary">
        <div class="label">üë• T·ªïng ng∆∞·ªùi d√πng</div>
        <div class="value">{{ total_users }}</div>
        <div class="subtext">T·∫•t c·∫£ t√†i kho·∫£n ƒë√£ ƒëƒÉng k√≠</div>
    </div>

    <div class="stat-card success">
        <div class="label">üìä H·ªì s∆° ng∆∞·ªùi d√πng</div>
        <div class="value">{{ total_profiles }}</div>
        <div class="subtext">H·ªì s∆° ƒë√£ t·∫°o</div>
    </div>

    <div class="stat-card warning">
        <div class="label">‚≠ê Admin & Staff</div>
        <div class="value">{{ admin_users }}</div>
        <div class="subtext">{{ regular_users }} user th∆∞·ªùng</div>
    </div>

    <div class="stat-card danger">
        <div class="label">üìà Ho·∫°t ƒë·ªông</div>
        <div class="value">{{ active_users }}</div>
        <div class="subtext">30 ng√†y qua</div>
    </div>
</div>

<!-- New Users Section -->
<div class="section">
    <h2>üÜï Ng∆∞·ªùi d√πng m·ªõi</h2>
    <div class="user-stats">
        <div class="user-stat-item">
            <div class="label">H√¥m nay</div>
            <div class="value" style="color: #FF6B6B;">{{ new_users_today }}</div>
        </div>
        <div class="user-stat-item">
            <div class="label">7 ng√†y qua</div>
            <div class="value" style="color: #51CF66;">{{ new_users_7days }}</div>
        </div>
    </div>
</div>

<!-- Profile Completion -->
<div class="section">
    <h2>‚úÖ Ho√†n th√†nh h·ªì s∆°</h2>
    <div style="margin-bottom: 15px;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
            <span style="font-weight: 500;">T·ª∑ l·ªá ho√†n th√†nh:</span>
            <span style="font-weight: 700; color: #A5D6A7;">{{ completion_rate }}%</span>
        </div>
        <div class="progress-bar">
            <div class="progress-bar-fill" style="width: {{ completion_rate }}%;"></div>
        </div>
    </div>
    <p style="color: #999; margin: 15px 0 0 0; font-size: 13px;">
        {{ profiles_with_weight }} / {{ total_profiles }} h·ªì s∆° ƒë√£ ƒëi·ªÅn th√¥ng tin c∆° b·∫£n
    </p>
</div>

<!-- Goals Distribution -->
<div class="section">
    <h2>üéØ Ph√¢n b·ªë m·ª•c ti√™u ng∆∞·ªùi d√πng</h2>
    {% if top_goals %}
        <ul class="goal-list">
            {% for goal in top_goals %}
                <li>
                    <span class="goal-name">{{ goal.goal }}</span>
                    <span class="goal-count">{{ goal.count }}</span>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p style="color: #999;">Ch∆∞a c√≥ d·ªØ li·ªáu m·ª•c ti√™u.</p>
    {% endif %}
</div>

<!-- Quick Actions -->
<div class="section">
    <h2>‚ö° H√†nh ƒë·ªông nhanh</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">
        <a href="/admin/auth/user/" style="display: inline-block; padding: 12px 16px; background: #A5D6A7; color: white; text-decoration: none; border-radius: 8px; font-weight: 600; text-align: center; transition: all 0.3s;">
            üë§ Qu·∫£n l√Ω User
        </a>
        <a href="/admin/products/userprofile/" style="display: inline-block; padding: 12px 16px; background: #51CF66; color: white; text-decoration: none; border-radius: 8px; font-weight: 600; text-align: center; transition: all 0.3s;">
            üìã H·ªì s∆° Ng∆∞·ªùi d√πng
        </a>
        <a href="/admin/products/product/" style="display: inline-block; padding: 12px 16px; background: #7BC67B; color: white; text-decoration: none; border-radius: 8px; font-weight: 600; text-align: center; transition: all 0.3s;">
            üõçÔ∏è S·∫£n ph·∫©m
        </a>
    </div>
</div>
{% endblock %}
