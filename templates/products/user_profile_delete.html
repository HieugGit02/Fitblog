{% extends "base.html" %}
{% load static %}

{% block title %}Xóa Tài Khoản - Fitblog{% endblock %}

{% block content %}
<div class="container" style="max-width: 600px; margin: 60px auto; padding: 0 20px;">
    <!-- Header -->
    <div style="margin-bottom: 40px;">
        <h1 style="font-size: 2rem; font-weight: 700; color: #1a1a1a; margin-bottom: 8px;">
            Xóa Tài Khoản
        </h1>
        <p style="font-size: 1rem; color: #666; margin: 0;">
            Hành động này không thể được hoàn tác. Vui lòng đọc kỹ trước khi tiếp tục.
        </p>
    </div>

    <!-- Warning Box -->
    <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 16px; border-radius: 4px; margin-bottom: 32px;">
        <p style="margin: 0; color: #333; font-weight: 500;">
            ⚠️ Xóa tài khoản sẽ xóa vĩnh viễn:
        </p>
        <ul style="margin: 12px 0 0 0; padding-left: 20px; color: #555; font-size: 0.95rem;">
            <li>Tài khoản & Email</li>
            <li>Hồ sơ cá nhân</li>
            <li>Tất cả đánh giá & bình luận</li>
            <li>Lịch sử gợi ý cá nhân</li>
            <li>Tất cả dữ liệu liên quan</li>
        </ul>
    </div>

    <!-- Delete Form -->
    <form method="post" action="{% url 'products:user_profile_delete_permanent' %}" id="deleteForm">
        {% csrf_token %}
        
        <!-- Confirmation Input -->
        <div style="margin-bottom: 24px;">
            <label style="display: block; font-size: 0.95rem; font-weight: 600; color: #1a1a1a; margin-bottom: 8px;">
                Để xác nhận xóa, nhập đoạn text dưới đây:
            </label>
            <div style="background: #f5f5f5; padding: 10px 12px; border-radius: 4px; margin-bottom: 8px; font-family: 'Courier New', monospace; color: #1a1a1a; font-weight: 600; font-size: 0.95rem;">
                XÓA TÀI KHOẢN
            </div>
            <input 
                type="text" 
                id="confirm_text"
                name="confirm_text"
                class="form-control"
                placeholder="Gõ chính xác"
                style="font-size: 1rem; padding: 10px 12px; border: 1px solid #ddd; border-radius: 4px;"
                required
            >
        </div>

        <!-- Delete Button -->
        <button type="submit" class="btn btn-danger" style="width: 100%; padding: 12px; font-size: 1rem; font-weight: 500; background-color: #dc3545; border: none; border-radius: 4px; color: white; cursor: pointer;">
            Xóa Tài Khoản Vĩnh Viễn
        </button>
    </form>

    <!-- Back Button -->
    <div style="text-align: center; margin-top: 24px;">
        <a href="{% url 'products:user_profile_view' %}" style="display: inline-block; padding: 10px 20px; color: #666; text-decoration: none; font-weight: 500; border: 1px solid #ddd; border-radius: 4px; transition: all 0.2s;">
            Quay Lại
        </a>
    </div>
</div>

<!-- CSS -->
<style>
    .form-control {
        border: 1px solid #ddd;
        border-radius: 4px;
        transition: border-color 0.2s;
    }

    .form-control:focus {
        border-color: #dc3545;
        box-shadow: none;
    }

    .btn-danger:hover {
        background-color: #c82333 !important;
    }

    a:hover {
        background-color: #f5f5f5;
    }
</style>

<!-- JavaScript: Validation -->
<script>
document.getElementById('deleteForm').addEventListener('submit', function(e) {
    const input = document.getElementById('confirm_text').value.trim();
    if (input !== 'XÓA TÀI KHOẢN') {
        e.preventDefault();
        alert('❌ Vui lòng nhập chính xác: "XÓA TÀI KHOẢN"');
        return false;
    }
});
</script>
{% endblock %}